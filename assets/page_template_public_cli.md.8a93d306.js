import{_ as s,J as l,o as n,c as e,N as o,V as p}from"./chunks/framework.c4e3e1ab.js";const A=JSON.parse('{"title":"fpi-cli","description":"","frontmatter":{},"headers":[],"relativePath":"page/template/public/cli.md","filePath":"page/template/public/cli.md","lastUpdated":1703129674000}'),t={name:"page/template/public/cli.md"},c=p(`<h1 id="fpi-cli" tabindex="-1">fpi-cli <a class="header-anchor" href="#fpi-cli" aria-label="Permalink to &quot;fpi-cli&quot;">​</a></h1><h2 id="进度" tabindex="-1">进度 <a class="header-anchor" href="#进度" aria-label="Permalink to &quot;进度&quot;">​</a></h2><h3 id="已完成" tabindex="-1">已完成 <a class="header-anchor" href="#已完成" aria-label="Permalink to &quot;已完成&quot;">​</a></h3><p>现阶段该脚手架可用于快速搭建微前端主、子应用，也支持创建通用的项目（需要整理出项目模板并且修改配置信息【配置信息见 update 指令】）。</p><ol><li>init【初始化工程】</li><li>update【升级模板 --- 升级模板配置信息】</li><li>integration【主应用集成 --- 将子应用安装包暴露到一级目录】</li></ol><h3 id="未完成" tabindex="-1">未完成 <a class="header-anchor" href="#未完成" aria-label="Permalink to &quot;未完成&quot;">​</a></h3><p>应用的预购建、构建、卸载指令暂未开发，需要后期完善</p><ol><li>pre-build【主应用与构建 --- 对子应用进行合法性校验（静态文件前缀是否合法、静态文件大小、性能是否达标等）】</li><li>build【主应用构建 --- 主应用构建，目前该指令暂时由主应用 scripts 中的 build 代替】</li></ol><h2 id="概述" tabindex="-1">概述 <a class="header-anchor" href="#概述" aria-label="Permalink to &quot;概述&quot;">​</a></h2><p>该脚手架主要用于微前端【包括主应用和子应用（子应用暂时未整理模板）】模板工程搭建，集成。</p><h2 id="使用" tabindex="-1">使用 <a class="header-anchor" href="#使用" aria-label="Permalink to &quot;使用&quot;">​</a></h2><h3 id="安装" tabindex="-1">安装 <a class="header-anchor" href="#安装" aria-label="Permalink to &quot;安装&quot;">​</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">@ued_fpi/fpi-cli</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-g</span></span></code></pre></div><h3 id="创建项目" tabindex="-1">创建项目 <a class="header-anchor" href="#创建项目" aria-label="Permalink to &quot;创建项目&quot;">​</a></h3><p>该指令主要用于快速创建主、子应用。</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">fpi</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">init</span><span style="color:#A6ACCD;"> [projectName]</span></span></code></pre></div><h3 id="模板配置升级" tabindex="-1">模板配置升级 <a class="header-anchor" href="#模板配置升级" aria-label="Permalink to &quot;模板配置升级&quot;">​</a></h3><p>该指令用于升级本地的项目配置信息，仓库中每一个分支对应一个工程模板，其中 config 分支主要用于存放配置信息。</p><p><a href="https://gitee.com/ued-fpi/web-fpi-cli-templete.git" target="_blank" rel="noreferrer">模板仓库地址</a>,</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">fpi</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">update</span></span></code></pre></div><h3 id="主应用集成" tabindex="-1">主应用集成 <a class="header-anchor" href="#主应用集成" aria-label="Permalink to &quot;主应用集成&quot;">​</a></h3><p>该指令主要用于主应用集成子应用（把 npm 包内容对外暴露到一级目录，方便后期打包构建或者开发环境调试），该指令仅在 npm 方案集成时有用，使用该指令前请确保主应用的根目录下已经存在 app.config.yml 文件，内容格式如下：</p><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F07178;">application</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">version</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1.0.0</span><span style="color:#A6ACCD;">   </span><span style="color:#676E95;font-style:italic;">## 主应用版本号</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">createTime</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> 2021-05-27</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">publishTime</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> 2021-05-27</span></span>
<span class="line"><span style="color:#F07178;">client</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">npm</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">      </span><span style="color:#676E95;font-style:italic;">## 依赖管理工具类型，可以是 npm 或 yarn</span></span>
<span class="line"><span style="color:#F07178;">microserviceList</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">## 一下为个子应用的配置信息</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">fpi-app2</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">        </span><span style="color:#676E95;font-style:italic;">## 子应用1名称</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">package</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> @</span><span style="color:#C3E88D;">canyuegongzi/fpi-app2</span><span style="color:#A6ACCD;">   </span><span style="color:#676E95;font-style:italic;">## 子应用1npm包</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">version</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0.1.0</span><span style="color:#A6ACCD;">                    </span><span style="color:#676E95;font-style:italic;">## 版本号</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">fpi-app2</span><span style="color:#A6ACCD;">                    </span><span style="color:#676E95;font-style:italic;">## 该名称主要用于注册子应用 </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">packageDirectory</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">dist</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">          </span><span style="color:#676E95;font-style:italic;">## 子应用静态构建后的目录，一般不用修改</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">entry</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;&#39;</span></span></code></pre></div><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">fpi</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">integration</span></span></code></pre></div><h2 id="开发" tabindex="-1">开发 <a class="header-anchor" href="#开发" aria-label="Permalink to &quot;开发&quot;">​</a></h2><ol><li>修改 package.json 信息，执行 <code>npm run build</code> <code>npm link</code>，该步骤的目的是允许在本地进行 cli 测试；</li><li>build 指令主要用于构建脚手架；</li></ol><h2 id="发布" tabindex="-1">发布 <a class="header-anchor" href="#发布" aria-label="Permalink to &quot;发布&quot;">​</a></h2><ol><li><code>npm run build</code> <code>npm publish --access public</code> 发布包；</li><li>version 版本号必须是递增；</li><li>为减少脚手架依赖信息，最好在发布前将 devDependencies 依赖信息移除掉。</li></ol><h2 id="微前端集成备注" tabindex="-1">微前端集成备注 <a class="header-anchor" href="#微前端集成备注" aria-label="Permalink to &quot;微前端集成备注&quot;">​</a></h2><ol><li>关键阶段慎用微任务，否则后续功能依赖关系会出现问题，如地图创建、插件注册；</li><li>尽可能减少各在子系统数据共享；</li><li>子系统裁剪插件，避免 app.js, vendors 过大（主系统需要通过 evel 运行），最好保持在1M之下；</li><li>子系统及时回收大对象、大数据，避免内存泄漏问题。</li></ol><h2 id="贡献者" tabindex="-1">贡献者 <a class="header-anchor" href="#贡献者" aria-label="Permalink to &quot;贡献者&quot;">​</a></h2>`,31);function i(r,y,d,h,C,D){const a=l("ContributorView");return n(),e("div",null,[c,o(a,{name:"张尚飞,金琳欣"})])}const b=s(t,[["render",i]]);export{A as __pageData,b as default};
